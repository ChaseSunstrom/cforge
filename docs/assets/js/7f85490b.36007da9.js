"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[114],{703:(e,n,d)=>{d.r(n),d.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"dependencies","title":"Working with Dependencies","description":"Working with Dependencies","source":"@site/docs/dependencies.md","sourceDirName":".","slug":"/dependencies","permalink":"/cforge/docs/dependencies","draft":false,"unlisted":false,"editUrl":"https://github.com/chasesunstrom/cforge/edit/main/docs/docs/dependencies.md","tags":[],"version":"current","frontMatter":{"id":"dependencies","title":"Working with Dependencies"},"sidebar":"sidebar","previous":{"title":"Project Configuration","permalink":"/cforge/docs/project-configuration"},"next":{"title":"Workspaces","permalink":"/cforge/docs/workspaces"}}');var r=d(4848),s=d(8453);const c={id:"dependencies",title:"Working with Dependencies"},t=void 0,l={},o=[{value:"Working with Dependencies",id:"working-with-dependencies",level:2},{value:"vcpkg Integration",id:"vcpkg-integration",level:3},{value:"Git Dependencies",id:"git-dependencies",level:3},{value:"Git Dependency Options",id:"git-dependency-options",level:4},{value:"System Dependencies",id:"system-dependencies",level:3},{value:"find_package Method",id:"find_package-method",level:4},{value:"pkg-config Method",id:"pkg-config-method",level:4},{value:"Manual Method",id:"manual-method",level:4},{value:"System Dependency Options",id:"system-dependency-options",level:4},{value:"Subdirectory Dependencies",id:"subdirectory-dependencies",level:3},{value:"Subdirectory Options",id:"subdirectory-options",level:4},{value:"Project Dependencies (Workspaces)",id:"project-dependencies-workspaces",level:3},{value:"Dependency Lock File",id:"dependency-lock-file",level:3},{value:"Dependency Tree",id:"dependency-tree",level:3},{value:"Managing Dependencies",id:"managing-dependencies",level:3}];function a(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"working-with-dependencies",children:"Working with Dependencies"}),"\n",(0,r.jsx)(n.p,{children:"CForge supports multiple dependency management systems to make it easy to include external libraries in your projects."}),"\n",(0,r.jsx)(n.h3,{id:"vcpkg-integration",children:"vcpkg Integration"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://vcpkg.io/",children:"vcpkg"})," is a C/C++ package manager from Microsoft. CForge integrates seamlessly with vcpkg:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'[dependencies.vcpkg]\r\nenabled = true\r\npath = "~/.vcpkg"          # Optional: directory of vcpkg installation\r\ntriplet = "x64-windows"    # Optional: specify vcpkg target triplet\r\npackages = ["fmt", "boost", "nlohmann-json"]\n'})}),"\n",(0,r.jsx)(n.p,{children:"CForge will automatically:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Install vcpkg if not found"}),"\n",(0,r.jsx)(n.li,{children:"Install the specified packages"}),"\n",(0,r.jsx)(n.li,{children:"Configure CMake to use vcpkg's toolchain file"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"git-dependencies",children:"Git Dependencies"}),"\n",(0,r.jsx)(n.p,{children:"Clone dependencies directly from Git repositories:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'[dependencies.git.fmt]\r\nurl = "https://github.com/fmtlib/fmt.git"\r\ntag = "11.1.4"\r\n\r\n[dependencies.git.nlohmann_json]\r\nurl = "https://github.com/nlohmann/json.git"\r\ntag = "v3.11.3"\r\n\r\n[dependencies.git.imgui]\r\nurl = "https://github.com/ocornut/imgui.git"\r\nbranch = "master"\r\nshallow = true\n'})}),"\n",(0,r.jsx)(n.h4,{id:"git-dependency-options",children:"Git Dependency Options"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Option"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"url"})}),(0,r.jsx)(n.td,{children:"Repository URL (required)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"tag"})}),(0,r.jsx)(n.td,{children:"Git tag to checkout"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"branch"})}),(0,r.jsx)(n.td,{children:"Git branch to checkout"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"commit"})}),(0,r.jsx)(n.td,{children:"Specific commit hash"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"shallow"})}),(0,r.jsx)(n.td,{children:"Use shallow clone (faster)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"directory"})}),(0,r.jsx)(n.td,{children:"Custom clone directory"})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["Git dependencies are automatically cloned into the ",(0,r.jsx)(n.code,{children:"deps"})," directory and included as CMake subdirectories."]}),"\n",(0,r.jsx)(n.h3,{id:"system-dependencies",children:"System Dependencies"}),"\n",(0,r.jsxs)(n.p,{children:["System dependencies support three methods: ",(0,r.jsx)(n.code,{children:"find_package"}),", ",(0,r.jsx)(n.code,{children:"pkg_config"}),", and ",(0,r.jsx)(n.code,{children:"manual"}),":"]}),"\n",(0,r.jsx)(n.h4,{id:"find_package-method",children:"find_package Method"}),"\n",(0,r.jsxs)(n.p,{children:["Use CMake's ",(0,r.jsx)(n.code,{children:"find_package"})," to locate system-installed libraries:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'[dependencies.system.OpenGL]\r\nmethod = "find_package"\r\nrequired = true\r\ncomponents = ["GL", "GLU"]\r\ntarget = "OpenGL::GL"\n'})}),"\n",(0,r.jsx)(n.h4,{id:"pkg-config-method",children:"pkg-config Method"}),"\n",(0,r.jsx)(n.p,{children:"Use pkg-config to locate libraries (common on Linux):"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'[dependencies.system.x11]\r\nmethod = "pkg_config"\r\npackage = "x11"\r\nplatforms = ["linux"]  # Only on Linux\n'})}),"\n",(0,r.jsx)(n.h4,{id:"manual-method",children:"Manual Method"}),"\n",(0,r.jsx)(n.p,{children:"Manually specify library paths and flags:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'[dependencies.system.custom_lib]\r\nmethod = "manual"\r\ninclude_dirs = ["/usr/local/include/custom"]\r\nlibrary_dirs = ["/usr/local/lib"]\r\nlibraries = ["custom", "custom_util"]\r\ndefines = ["USE_CUSTOM_LIB"]\r\nplatforms = ["linux", "macos"]  # Limit to specific platforms\n'})}),"\n",(0,r.jsx)(n.h4,{id:"system-dependency-options",children:"System Dependency Options"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Option"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"method"})}),(0,r.jsxs)(n.td,{children:["Detection method: ",(0,r.jsx)(n.code,{children:"find_package"}),", ",(0,r.jsx)(n.code,{children:"pkg_config"}),", or ",(0,r.jsx)(n.code,{children:"manual"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"required"})}),(0,r.jsx)(n.td,{children:"Whether the dependency is required (default: true)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"components"})}),(0,r.jsx)(n.td,{children:"CMake components for find_package"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"target"})}),(0,r.jsx)(n.td,{children:"CMake target name to link"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"package"})}),(0,r.jsx)(n.td,{children:"Package name for pkg-config"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"include_dirs"})}),(0,r.jsx)(n.td,{children:"Include directories (manual method)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"library_dirs"})}),(0,r.jsx)(n.td,{children:"Library directories (manual method)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"libraries"})}),(0,r.jsx)(n.td,{children:"Library names to link (manual method)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"defines"})}),(0,r.jsx)(n.td,{children:"Preprocessor definitions"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"platforms"})}),(0,r.jsx)(n.td,{children:"Limit to specific platforms"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"subdirectory-dependencies",children:"Subdirectory Dependencies"}),"\n",(0,r.jsx)(n.p,{children:"Use existing CMake projects as dependencies:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'[dependencies.subdirectory.spdlog]\r\npath = "extern/spdlog"\r\ntarget = "spdlog::spdlog"\r\noptions = { SPDLOG_BUILD_TESTS = "OFF" }\r\n\r\n[dependencies.subdirectory.glfw]\r\npath = "extern/glfw"\r\ntarget = "glfw"\r\noptions = { GLFW_BUILD_EXAMPLES = "OFF", GLFW_BUILD_TESTS = "OFF" }\n'})}),"\n",(0,r.jsx)(n.h4,{id:"subdirectory-options",children:"Subdirectory Options"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Option"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"path"})}),(0,r.jsx)(n.td,{children:"Path to the CMake project directory"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"target"})}),(0,r.jsx)(n.td,{children:"CMake target to link"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"options"})}),(0,r.jsx)(n.td,{children:"CMake options to set before add_subdirectory"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"project-dependencies-workspaces",children:"Project Dependencies (Workspaces)"}),"\n",(0,r.jsx)(n.p,{children:"In a workspace, depend on other projects:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'[dependencies.project.core]\r\ninclude_dirs = ["include"]\r\nlink = true\r\nlink_type = "PRIVATE"\n'})}),"\n",(0,r.jsxs)(n.p,{children:["See ",(0,r.jsx)(n.a,{href:"workspaces",children:"Workspaces"})," for more details."]}),"\n",(0,r.jsx)(n.h3,{id:"dependency-lock-file",children:"Dependency Lock File"}),"\n",(0,r.jsx)(n.p,{children:"Ensure reproducible builds with lock files:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Generate/update lock file\r\ncforge lock\r\n\r\n# Verify dependencies match lock file\r\ncforge lock --verify\r\n\r\n# Force regeneration\r\ncforge lock --force\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The lock file (",(0,r.jsx)(n.code,{children:"cforge.lock"}),") records the exact versions of all dependencies, ensuring consistent builds across different machines and times."]}),"\n",(0,r.jsx)(n.h3,{id:"dependency-tree",children:"Dependency Tree"}),"\n",(0,r.jsx)(n.p,{children:"Visualize your project's dependencies:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cforge tree\n"})}),"\n",(0,r.jsx)(n.p,{children:"Output:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"myproject v1.0.0\r\n|-- fmt @ 11.1.4 (git)\r\n|-- nlohmann_json @ v3.11.3 (git)\r\n|-- boost (vcpkg)\r\n`-- OpenGL (system)\r\n\r\nDependencies: 2 git, 1 vcpkg, 1 system\n"})}),"\n",(0,r.jsx)(n.h3,{id:"managing-dependencies",children:"Managing Dependencies"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Add a git dependency\r\ncforge add fmt --git https://github.com/fmtlib/fmt.git --tag 11.1.4\r\n\r\n# Add a vcpkg dependency\r\ncforge add boost --vcpkg\r\n\r\n# Remove a dependency\r\ncforge remove fmt\r\n\r\n# Update all dependencies\r\ncforge deps update\n"})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,n,d)=>{d.d(n,{R:()=>c,x:()=>t});var i=d(6540);const r={},s=i.createContext(r);function c(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);